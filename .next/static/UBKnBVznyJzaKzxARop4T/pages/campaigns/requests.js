(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{Mybo:function(e,t,a){"use strict";a.r(t);var r=a("o0o1"),n=a.n(r),c=a("HaE+"),s=a("1OyB"),l=a("vuIU"),o=a("Ji7U"),i=a("md7G"),u=a("foSv"),p=a("q1tI"),d=a.n(p),b=a("5Yp1"),f=a("8cHP"),v=a("pVnL"),O=a.n(v),j=(a("Wt1U"),a("3WF5")),h=a.n(j),m=a("TSYQ"),g=a.n(m),w=(a("17x9"),a("ZeOK")),y=a("ICNK"),R=a("Y53p"),A=a("H+2d");function N(e){var t=e.children,a=e.className,r=g()(a),n=Object(y.a)(N,e),c=Object(R.a)(N,e);return d.a.createElement(c,O()({},n,{className:r}),t)}N.handledProps=["as","children","className"],N.defaultProps={as:"tbody"},N.propTypes={};var P=N,x=a("MZgk"),C=a("D1pA");function k(e){var t=e.active,a=e.children,r=e.className,n=e.collapsing,c=e.content,s=e.disabled,l=e.error,o=e.icon,i=e.negative,u=e.positive,p=e.selectable,b=e.singleLine,f=e.textAlign,v=e.verticalAlign,j=e.warning,h=e.width,m=g()(Object(w.a)(t,"active"),Object(w.a)(n,"collapsing"),Object(w.a)(s,"disabled"),Object(w.a)(l,"error"),Object(w.a)(i,"negative"),Object(w.a)(u,"positive"),Object(w.a)(p,"selectable"),Object(w.a)(b,"single line"),Object(w.a)(j,"warning"),Object(w.d)(f),Object(w.f)(v),Object(w.g)(h,"wide"),r),N=Object(y.a)(k,e),P=Object(R.a)(k,e);return A.a.isNil(a)?d.a.createElement(P,O()({},N,{className:m}),C.a.create(o),c):d.a.createElement(P,O()({},N,{className:m}),a)}k.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],k.defaultProps={as:"td"},k.propTypes={},k.create=Object(x.e)(k,(function(e){return{content:e}}));var q=k;function E(e){var t=e.children,a=e.className,r=e.content,n=e.fullWidth,c=g()(Object(w.a)(n,"full-width"),a),s=Object(y.a)(E,e),l=Object(R.a)(E,e);return d.a.createElement(l,O()({},s,{className:c}),A.a.isNil(t)?r:t)}E.handledProps=["as","children","className","content","fullWidth"],E.defaultProps={as:"thead"},E.propTypes={};var T=E;function B(e){var t=e.as,a=Object(y.a)(B,e);return d.a.createElement(T,O()({},a,{as:t}))}B.handledProps=["as"],B.propTypes={},B.defaultProps={as:"tfoot"};var D=B;function z(e){var t=e.as,a=e.className,r=e.sorted,n=g()(Object(w.e)(r,"sorted"),a),c=Object(y.a)(z,e);return d.a.createElement(q,O()({},c,{as:t,className:n}))}z.handledProps=["as","className","sorted"],z.propTypes={},z.defaultProps={as:"th"};var F=z;function H(e){var t=e.active,a=e.cellAs,r=e.cells,n=e.children,c=e.className,s=e.disabled,l=e.error,o=e.negative,i=e.positive,u=e.textAlign,p=e.verticalAlign,b=e.warning,f=g()(Object(w.a)(t,"active"),Object(w.a)(s,"disabled"),Object(w.a)(l,"error"),Object(w.a)(o,"negative"),Object(w.a)(i,"positive"),Object(w.a)(b,"warning"),Object(w.d)(u),Object(w.f)(p),c),v=Object(y.a)(H,e),j=Object(R.a)(H,e);return A.a.isNil(n)?d.a.createElement(j,O()({},v,{className:f}),h()(r,(function(e){return q.create(e,{defaultProps:{as:a}})}))):d.a.createElement(j,O()({},v,{className:f}),n)}H.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],H.defaultProps={as:"tr",cellAs:"td"},H.propTypes={},H.create=Object(x.e)(H,(function(e){return{cells:e}}));var L=H;function I(e){var t=e.attached,a=e.basic,r=e.celled,n=e.children,c=e.className,s=e.collapsing,l=e.color,o=e.columns,i=e.compact,u=e.definition,p=e.fixed,b=e.footerRow,f=e.headerRow,v=e.headerRows,j=e.inverted,m=e.padded,N=e.renderBodyRow,x=e.selectable,C=e.singleLine,k=e.size,q=e.sortable,E=e.stackable,B=e.striped,z=e.structured,F=e.tableData,H=e.textAlign,_=e.unstackable,W=e.verticalAlign,J=g()("ui",l,k,Object(w.a)(r,"celled"),Object(w.a)(s,"collapsing"),Object(w.a)(u,"definition"),Object(w.a)(p,"fixed"),Object(w.a)(j,"inverted"),Object(w.a)(x,"selectable"),Object(w.a)(C,"single line"),Object(w.a)(q,"sortable"),Object(w.a)(E,"stackable"),Object(w.a)(B,"striped"),Object(w.a)(z,"structured"),Object(w.a)(_,"unstackable"),Object(w.b)(t,"attached"),Object(w.b)(a,"basic"),Object(w.b)(i,"compact"),Object(w.b)(m,"padded"),Object(w.d)(H),Object(w.f)(W),Object(w.g)(o,"column"),"table",c),S=Object(y.a)(I,e),Y=Object(R.a)(I,e);if(!A.a.isNil(n))return d.a.createElement(Y,O()({},S,{className:J}),n);var M={defaultProps:{cellAs:"th"}},Q=(f||v)&&d.a.createElement(T,null,L.create(f,M),h()(v,(function(e){return L.create(e,M)})));return d.a.createElement(Y,O()({},S,{className:J}),Q,d.a.createElement(P,null,N&&h()(F,(function(e,t){return L.create(N(e,t))}))),b&&d.a.createElement(D,null,L.create(b)))}I.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],I.defaultProps={as:"table"},I.propTypes={},I.Body=P,I.Cell=q,I.Footer=D,I.Header=T,I.HeaderCell=F,I.Row=L;var _=I,W=a("QetY"),J=a("VC3L"),S=a("JX7q"),Y=a("rePB"),M=a("oZBQ"),Q=d.a.createElement;function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=Object(u.a)(e);if(t){var n=Object(u.a)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return Object(i.a)(this,a)}}var X=function(e){Object(o.a)(a,e);var t=U(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return e=t.call.apply(t,[this].concat(l)),Object(Y.a)(Object(S.a)(e),"onApprove",Object(c.a)(n.a.mark((function t(){var a,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(J.a)(e.props.address),t.next=3,M.a.eth.getAccounts();case 3:return r=t.sent,t.next=6,a.methods.approveRequest(e.props.id).send({from:r[0]});case 6:case"end":return t.stop()}}),t)})))),Object(Y.a)(Object(S.a)(e),"onFinalize",Object(c.a)(n.a.mark((function t(){var a,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(J.a)(e.props.address),t.next=3,M.a.eth.getAccounts();case 3:return r=t.sent,t.next=6,a.methods.finalizeRequest(e.props.id).send({from:r[0]});case 6:case"end":return t.stop()}}),t)})))),e}return Object(l.a)(a,[{key:"render",value:function(){var e=_.Row,t=_.Cell,a=this.props,r=a.id,n=a.request,c=a.approversCount,s=n.approvalCount>c/2;return Q(e,{disabled:n.complete,positive:s&&!n.complete},Q(t,null,r),Q(t,null,n.description),Q(t,null,M.a.utils.fromWei(n.value,"ether")),Q(t,null,n.recipient),Q(t,null,n.approvalCount,"/",c),n.complete?null:Q(t,null,Q(W.a,{basic:!0,color:"green",onClick:this.onApprove},"Approve")),n.complete?null:Q(t,null,Q(W.a,{basic:!0,color:"teal",onClick:this.onFinalize},"Finalize")))}}]),a}(p.Component),Z=d.a.createElement;function K(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=Object(u.a)(e);if(t){var n=Object(u.a)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return Object(i.a)(this,a)}}var V=function(e){Object(o.a)(a,e);var t=K(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"renderRows",value:function(){var e=this;return this.props.requests.map((function(t,a){return Z(X,{key:a,id:a,request:t,address:e.props.address,approversCount:e.props.approversCount})}))}},{key:"render",value:function(){var e=_.Header,t=_.Row,a=_.HeaderCell,r=_.Body;_.Cell;return Z(b.a,null,Z("h3",null,"Requests"),Z(f.Link,{route:"/campaigns/".concat(this.props.address,"/requests/new")},Z("a",null,Z(W.a,{primary:!0,floated:"right",style:{marginBottom:10}},"Add Request"))),Z(_,null,Z(e,null,Z(t,null,Z(a,null,"Id"),Z(a,null,"Description"),Z(a,null,"Amount"),Z(a,null,"Recipient"),Z(a,null,"Approval Count"),Z(a,null,"Approve"),Z(a,null,"Finalize"))),Z(r,null,this.renderRows())),Z("div",null," Found ",this.props.requestCount," requests "))}}],[{key:"getInitialProps",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var a,r,c,s,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.query.address,e.next=3,Object(J.a)(a);case 3:return r=e.sent,e.next=6,r.methods.getRequestsCount().call();case 6:return c=e.sent,e.next=9,r.methods.approversCount().call();case 9:return s=e.sent,e.next=12,Promise.all(Array(parseInt(c)).fill().map((function(e,t){return r.methods.requests(t).call()})));case 12:return l=e.sent,e.abrupt("return",{address:a,requests:l,requestCount:c,approversCount:s});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),a}(p.Component);t.default=V},"m/hO":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/requests",function(){return a("Mybo")}])}},[["m/hO",0,2,1,3,4,5,8]]]);